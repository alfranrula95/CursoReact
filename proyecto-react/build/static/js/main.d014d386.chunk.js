(this["webpackJsonpejercicios-tema7"]=this["webpackJsonpejercicios-tema7"]||[]).push([[0],{22:function(e,t,n){},33:function(e,t,n){},50:function(e,t,n){},56:function(e,t,n){},59:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n(23),r=n.n(o),a=n(10),s=(n(50),n(43)),i=n(4),l=(n(33),n(2));function u(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(""),s=Object(a.a)(r,2),u=s[0],d=s[1],j=Object(c.useState)(!1),b=Object(a.a)(j,2),f=b[0],O=b[1],m=Object(c.useState)(!1),p=Object(a.a)(m,2),h=p[0],g=p[1],x=Object(i.f)();return Object(l.jsx)("div",{className:"row col-md-12 justify-content-center",children:Object(l.jsxs)("div",{className:"col-md-6 card",children:[Object(l.jsx)("h1",{children:"Registro"}),Object(l.jsxs)("div",{className:"col-md-12",children:[Object(l.jsx)("label",{className:"form-label",children:"Username"}),Object(l.jsx)("input",{type:"text",name:"username",className:"form-control",onChange:function(e){O(!1),g(!1),o(e.target.value)}}),Object(l.jsx)("label",{className:"form-label",children:"Password"}),Object(l.jsx)("input",{type:"password",name:"password",className:"form-control",onChange:function(e){O(!1),g(!1),d(e.target.value)}})]}),Object(l.jsx)("div",{className:"col-md-12 justify-content-center",children:Object(l.jsx)("button",{className:"btn btn-primary botones",onClick:function(e){window.localStorage.getItem(n)?g(!0):(g(!1),u.length<5?O(!0):(O(!1),window.localStorage.setItem(n,u),x.push("/")))},type:"submit",children:"Registrar"})}),f&&Object(l.jsx)("p",{children:"La contrase\xf1a ha de tener minimo 5 caracteres"}),h&&Object(l.jsx)("p",{children:"El username introducido ya existe"})]})})}var d={logged:!1,login:function(){},logout:function(){}},j=Object(c.createContext)(d);function b(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(""),s=Object(a.a)(r,2),u=s[0],d=s[1],b=Object(c.useState)(!1),f=Object(a.a)(b,2),O=f[0],m=f[1],p=Object(i.f)(),h=Object(c.useContext)(j);return Object(l.jsx)("div",{className:"row col-md-12 justify-content-center",children:Object(l.jsxs)("div",{className:"col-md-6 card",children:[Object(l.jsx)("h1",{children:"Log in"}),Object(l.jsxs)("div",{className:"col-md-12",children:[Object(l.jsx)("label",{className:"form-label",children:"Username"}),Object(l.jsx)("input",{type:"text",className:"form-control",name:"username",onChange:function(e){m(!1),o(e.target.value)}}),Object(l.jsx)("label",{className:"form-label",children:"Password"}),Object(l.jsx)("input",{type:"password",className:"form-control",name:"password",onChange:function(e){m(!1),d(e.target.value)}})]}),Object(l.jsxs)("div",{className:"col-md-12 justify-content-center",children:[Object(l.jsx)("button",{className:"btn btn-primary botones",onClick:function(e){window.localStorage.getItem(n)?window.localStorage.getItem(n)===u?(m(!1),h.login(),p.push("/store")):m(!0):m(!0)},type:"submit",children:"Log in"}),Object(l.jsx)("button",{className:"btn btn-secondary botones",onClick:function(e){m(!1),p.push("/registro")},children:"Registrate"})]}),O&&Object(l.jsx)("p",{children:"Credenciales incorrectas"})]})})}var f=n(16),O=(n(22),"GET_PRODUCTOS"),m="VER_PRODUCTO",p="LOAD_PRODUCTS",h="LOAD_ONE",g="SEL_PROD",x=function(e){return{type:m,payload:e}},v=function(e){return console.log("setearLista"),console.log(e),{type:O,payload:e}},w="LOGIN",y="LOGOUT";function N(e){var t=Object(c.useCallback)((function(t){e.select(t)}),[e]);return Object(c.useEffect)((function(){console.log("render Producto")}),[]),Object(l.jsxs)("div",{className:"col-md-3 card product ",onClick:function(){return t(e.item.id)},children:[Object(l.jsx)("h4",{children:e.item.title}),Object(l.jsx)("br",{}),Object(l.jsx)("img",{src:e.item.image,alt:"imagen"})]})}var k=Object(c.memo)(N);function S(e){var t=Object(c.useCallback)((function(t){e.select(t)}),[e]);return Object(c.useEffect)((function(){console.log("render Catalogo")}),[]),Object(l.jsxs)("div",{className:"row col-md-12 muestrario",children:[e.productos.length>0&&e.productos.map((function(e,n){return Object(l.jsx)(k,{item:e,select:t},n)})),0===e.productos.length&&Object(l.jsx)("h1",{children:"Cargando productos..."})]})}var C=Object(c.memo)(S);var E=function(){var e=Object(f.b)(),t=Object(c.useState)([]),n=Object(a.a)(t,2),o=n[0],r=n[1],s=Object(f.c)((function(e){return e})),u=Object(i.f)();Object(c.useMemo)((function(){console.log("usememo"),r(s.listaProductos)}),[s.listaProductos]),Object(c.useEffect)((function(){console.log("render Store"),0===s.listaProductos.length&&(console.log("getteando"),e({type:p}))}),[]);var d=Object(c.useCallback)((function(t){e(x(t)),u.push("/product",{id:1})}),[]);return Object(l.jsx)(C,{productos:o,select:d})},P=(n(56),function(e){var t=e.className,n=e.href,c=e.children,o=Object(i.f)();return Object(l.jsx)("a",{className:t,href:n,onClick:function(e){e.preventDefault(),console.log("linkpropio clickado"),window.history.pushState({},"",n),o.push(n,{})},children:c})});function L(e){var t=Object(f.b)(),n=Object(i.f)(),o=Object(c.useContext)(j);return Object(l.jsx)("div",{className:"row col-md-12",children:Object(l.jsxs)("ul",{className:"nav",children:[Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(P,{href:"/about",className:"nav-link",children:"Navegar al About"})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(P,{href:"/store",className:"nav-link",children:"Store"})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)("button",{onClick:function(e){console.log("cerrando"),t(v([])),t(x(null)),o.logout(),n.push("/")},className:"btn btn-outline-danger",children:"Log out"})})]})})}var T=function(e){var t=Object(f.b)(),n=Object(f.c)((function(e){return e})),o=Object(i.f)();return Object(c.useEffect)((function(){var e;console.log(n.selected),n.selected?t((e=n.selected,{type:h,payload:e})):o.push("/store")}),[t]),Object(l.jsx)("div",{className:"row col-md-12 justify-content-center",children:n.productoSel&&Object(l.jsxs)("div",{className:"col-md-8 detalles card",children:[Object(l.jsx)("h1",{children:n.productoSel.title}),Object(l.jsx)("br",{}),Object(l.jsx)("img",{src:n.productoSel.image,alt:"imagen"}),Object(l.jsx)("p",{children:n.productoSel.description}),Object(l.jsxs)("p",{children:[n.productoSel.price,"$"]})]})})};function _(){var e=Object(i.f)();return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Pagina About"}),Object(l.jsx)("p",{children:window.history.state.mensaje}),Object(l.jsx)("p",{children:e.location.state.mensaje})]})}var R=n(14),U="LOGIN",D="LOGOUT",A={logged:!1},I=function(e,t){switch(t.type){case U:return Object(R.a)(Object(R.a)({},A),{},{logged:!0});case D:return Object(R.a)(Object(R.a)({},A),{},{logged:!1});default:return e}},B=n(31),W=n(30);n(59);function G(){var e=Object(c.useState)(!0),t=Object(a.a)(e,2),n=t[0],o=t[1],r=function(){var e;if(n){document.getElementsByTagName("body")[0].style.backgroundColor="#282c34",document.getElementsByTagName("body")[0].style.color="#ffffff",e=document.getElementsByClassName("card");for(var t=0;t<e.length;t++)e[t].style.border="1px solid #ffffff";o(!n)}else{document.getElementsByTagName("body")[0].style.backgroundColor="#ffffff",document.getElementsByTagName("body")[0].style.color="#282c34",e=document.getElementsByClassName("card");for(var c=0;c<e.length;c++)e[c].style.border="1px solid rgba(0,0,0,.125)";o(!n)}},s=n?Object(l.jsx)("div",{children:Object(l.jsx)(W.a,{icon:B.a})}):Object(l.jsx)("div",{children:Object(l.jsx)(W.a,{icon:B.b})});return Object(l.jsxs)("div",{className:"row col-md-12 justify-content-end",children:[!n&&Object(l.jsx)("button",{className:"btn btn-light toggler",onClick:r,children:s}),n&&Object(l.jsx)("button",{className:"btn btn-dark toggler",onClick:r,children:s})]})}var F=function(){var e=Object(c.useReducer)(I,A),t=Object(a.a)(e,2),n=t[0],o=t[1];return Object(c.useEffect)((function(){console.log("render APP")}),[]),Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)("div",{className:"App-body",children:[Object(l.jsx)(G,{}),Object(l.jsx)("div",{className:"container",children:Object(l.jsx)(j.Provider,{className:"App",value:{logged:n.logged,login:function(){o({type:U})},logout:function(){o({type:D})}},children:Object(l.jsxs)(s.a,{children:[n.logged&&Object(l.jsx)(L,{}),Object(l.jsx)(i.b,{exact:!0,path:"/",component:b}),Object(l.jsx)(i.b,{exact:!0,path:"/about",children:n.logged?Object(l.jsx)(_,{}):Object(l.jsx)(i.a,{to:"/"})}),Object(l.jsx)(i.b,{exact:!0,path:"/registro",component:u}),Object(l.jsx)(i.b,{path:"/store",children:n.logged?Object(l.jsx)(E,{}):Object(l.jsx)(i.a,{to:"/"})}),Object(l.jsx)(i.b,{path:"/product",children:n.logged?Object(l.jsx)(T,{}):Object(l.jsx)(i.a,{to:"/"})})]})})})]})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),r(e),a(e)}))},V=n(18),z={listaProductos:[],selected:null,iniciado:!1,productoSel:null},H=n(45),J=n(9),$=n.n(J),q=n(17),M=n(32),K=n(44),Q=n.n(K).a.create({baseURL:"https://fakestoreapi.com/products",responseType:"json"});Q.interceptors.request.use((function(e){return console.log("He lanzado una petici\xf3n con la siguiente configuraci\xf3n: ",e),e}),(function(e){return Promise.reject(e)})),Q.interceptors.response.use((function(e){console.log("He lanzado una petici\xf3n con la siguiente configuraci\xf3n: ",e);var t=e.status;return t<200||t>=300?Promise.reject("Response status: ".concat(t)):e}),(function(e){return Promise.reject(e)}));var Y=function(){var e=Object(M.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q.get().then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(M.a)($.a.mark((function e(t){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q.get("/"+t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=$.a.mark(re),te=$.a.mark(ae),ne=$.a.mark(se),ce=$.a.mark(ie),oe=$.a.mark(le);function re(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.a)([Object(q.c)(ae),Object(q.c)(se)]);case 2:case"end":return e.stop()}}),ee)}function ae(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.e)(p,ie);case 2:case"end":return e.stop()}}),te)}function se(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.e)(h,le);case 2:case"end":return e.stop()}}),ne)}function ie(){var e;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(q.b)((function(){return Y()}));case 2:return e=t.sent,t.next=5,Object(q.d)(v(e));case 5:case"end":return t.stop()}}),ce)}function le(e){var t,n;return $.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.next=3,Object(q.b)((function(){return Z(t)}));case 3:return n=c.sent,c.next=6,Object(q.d)((o=n,console.log("selprod - > "+o),{type:g,payload:o}));case 6:case"end":return c.stop()}var o}),oe)}var ue=Object(H.a)(),de=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),je=Object(V.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return e.listaProductos=t.payload,Object(R.a)({},e);case m:return e.selected=t.payload,Object(R.a)({},e);case h:case g:return e.productoSel=t.payload,Object(R.a)({},e);case w:return e.iniciado=!0,Object(R.a)({},e);case y:return e.iniciado=!1,Object(R.a)({},e);default:return Object(R.a)({},e)}}),Object(V.b)(Object(V.a)(ue),de));ue.run(re);var be=je,fe=(n(78),n(79),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Oe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(Object(l.jsx)(f.a,{store:be,children:Object(l.jsx)(F,{})}),document.getElementById("root")),X(),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");fe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Oe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Oe(t,e)}))}}()}},[[80,1,2]]]);
//# sourceMappingURL=main.d014d386.chunk.js.map